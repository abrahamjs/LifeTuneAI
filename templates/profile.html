{% extends "base.html" %}
{% block content %}
<div class="container py-4">
    <div class="row">
        <!-- Profile Overview -->
        <div class="col-md-4">
            <div class="card profile-card mb-4">
                <div class="card-body text-center">
                    <div class="level-badge mb-3">
                        <span class="display-4" id="currentLevel">1</span>
                    </div>
                    <h4 class="mb-2" id="username">Loading...</h4>
                    <div class="xp-progress mb-3">
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                 role="progressbar" id="xpProgress"></div>
                        </div>
                        <small class="text-muted" id="xpText">XP: 0 / 100</small>
                    </div>
                    <div class="streak-info">
                        <div class="streak-count">
                            <i class="bi bi-fire"></i>
                            <span id="streakCount">0</span> Day Streak
                        </div>
                        <div class="multiplier">
                            <i class="bi bi-stars"></i>
                            <span id="multiplier">1.0</span>x Multiplier
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievements -->
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Achievements</h5>
                </div>
                <div class="card-body">
                    <div class="achievements-grid" id="achievementsList">
                        <!-- Achievements will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Challenges -->
    <div class="row">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Daily Challenges</h5>
                    <span class="badge bg-info" id="challengesTimeLeft">Resets in: 24h</span>
                </div>
                <div class="card-body">
                    <div class="challenges-container" id="challengesList">
                        <!-- Challenges will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rewards Shop -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Rewards Shop</h5>
                    <span class="badge bg-success" id="availablePoints">Points: 0</span>
                </div>
                <div class="card-body">
                    <div class="rewards-grid" id="rewardsList">
                        <!-- Rewards will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Level Up Modal -->
<div class="modal fade" id="levelUpModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center py-4">
                <div class="level-up-animation mb-3">
                    <i class="bi bi-trophy display-1"></i>
                </div>
                <h3>Level Up!</h3>
                <p class="mb-0">Congratulations! You've reached level <span id="newLevel">2</span></p>
                <div class="rewards-summary mt-3">
                    <p>Rewards Unlocked:</p>
                    <ul class="list-unstyled" id="levelRewards">
                        <!-- Level rewards will be listed here -->
                    </ul>
                </div>
            </div>
            <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Continue</button>
            </div>
        </div>
    </div>
</div>

<!-- Achievement Unlock Modal -->
<div class="modal fade" id="achievementModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center py-4">
                <div class="achievement-animation mb-3">
                    <i class="bi bi-award display-1"></i>
                </div>
                <h3>Achievement Unlocked!</h3>
                <p id="achievementName" class="mb-2"></p>
                <p id="achievementDescription" class="text-muted"></p>
                <div class="xp-reward mt-3">
                    <span class="badge bg-success" id="achievementXP"></span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}
